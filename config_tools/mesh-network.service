[Unit]
Description=Mobile Ad-Hoc Mesh Network Service
Wants=NetworkManager-wait-online.service
After=NetworkManager-wait-online.service

[Service]
Type=oneshot
RemainAfterExit=yes
EnvironmentFile=/etc/mesh-network/mesh-config.conf

ExecStartPre=/bin/bash -c 'while ! ip link show $MESH_INTERFACE; do sleep 2; done'
ExecStart=/usr/sbin/mesh-network.sh
ExecStop=/usr/sbin/mesh-network-stop.sh

[Install]
WantedBy=multi-user.target
